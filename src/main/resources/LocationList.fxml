<?xml version="1.0" encoding="UTF-8"?>

<?import de.jensd.fx.glyphs.fontawesome.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<HBox spacing="0" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.LocationListController">
    
    <!-- Filter Panel -->
    <VBox alignment="TOP_CENTER" maxWidth="300" minWidth="300" prefHeight="597.0" prefWidth="300.0" styleClass="filters-panel">
        <padding>
            <Insets bottom="20" left="20" right="20" top="20" />
        </padding>
        
        <!-- Filter Header -->
        <HBox spacing="10">
            <FontAwesomeIconView glyphName="FILTER" size="1.2em" />
            <Label styleClass="filter-header" text="Filters" />
            <Region HBox.hgrow="ALWAYS" />
        </HBox>

        <Separator>
            <VBox.margin>
                <Insets bottom="20" top="10" />
            </VBox.margin>
        </Separator>

        <!-- Price Range Filter -->
        <Label styleClass="filter-label" text="Price Range (DT)" />
        <HBox alignment="CENTER" spacing="10">
            <TextField fx:id="minPriceField" prefWidth="100" promptText="Min" />
            <Label text="-" />
            <TextField fx:id="maxPriceField" prefWidth="100" promptText="Max" />
        </HBox>

        <Separator>
            <VBox.margin>
                <Insets bottom="15" top="15" />
            </VBox.margin>
        </Separator>

        <!-- Capacity Filter -->
        <Label styleClass="filter-label" text="Capacity" />
        <HBox alignment="CENTER" spacing="10">
            <TextField fx:id="minCapacityField" prefWidth="100" promptText="Min people" />
            <Label text="-" />
            <TextField fx:id="maxCapacityField" prefWidth="100" promptText="Max people" />
        </HBox>

        <Separator>
            <VBox.margin>
                <Insets bottom="15" top="15" />
            </VBox.margin>
        </Separator>

        <!-- City Filter -->
        <Label styleClass="filter-label" text="City" />
        <ComboBox fx:id="cityComboBox" maxWidth="Infinity" promptText="Select city" />

        <Separator>
            <VBox.margin>
                <Insets bottom="15" top="15" />
            </VBox.margin>
        </Separator>

        <!-- Status Filter -->
        <Label styleClass="filter-label" text="Status" />
        <ComboBox fx:id="statusComboBox" maxWidth="Infinity" promptText="Select status" />

        <Separator>
            <VBox.margin>
                <Insets bottom="15" top="15" />
            </VBox.margin>
        </Separator>

        <!-- Amenities -->
        <Label styleClass="filter-label" text="Amenities" />
        <VBox spacing="10">
            <CheckBox fx:id="has3DTourCheckbox" text="3D Tour Available" />
            <CheckBox fx:id="hasCornerPlantsCheckbox" text="Corner Plants" />
            <CheckBox fx:id="hasCeilingLightsCheckbox" text="Ceiling Lights" />
        </VBox>

        <Separator>
            <VBox.margin>
                <Insets bottom="15" top="15" />
            </VBox.margin>
        </Separator>

        <!-- Table Sets Filter -->
        <Label styleClass="filter-label" text="Table Sets" />
        <Slider fx:id="tableSetSlider" min="1" max="5" value="1" majorTickUnit="1" minorTickCount="0" snapToTicks="true" showTickLabels="true" />

        <Region VBox.vgrow="ALWAYS" />

        <!-- Apply Filters Button -->
        <Button fx:id="applyFiltersButton" maxWidth="Infinity" onAction="#handleApplyFilters" styleClass="apply-button" text="Apply Filters">
            <graphic>
                <FontAwesomeIconView glyphName="CHECK" size="1.2em" />
            </graphic>
        </Button>
    </VBox>

    <!-- Main Content -->
    <VBox spacing="0" HBox.hgrow="ALWAYS">
        <!-- Header Bar -->
        <VBox styleClass="header-bar">
            <padding>
                <Insets bottom="30" left="40" right="40" top="30" />
            </padding>
            
            <!-- Title Section -->
            <VBox spacing="5">
                <Label styleClass="header-title" text="Location Management" />
                <Label styleClass="header-subtitle" text="Manage and organize your event locations efficiently" />
            </VBox>
            
            <!-- Action Bar -->
            <HBox alignment="CENTER_LEFT" spacing="15">
                <padding>
                    <Insets bottom="0" left="0" right="0" top="25" />
                </padding>
                
                <!-- Search with icon -->
                <HBox alignment="CENTER_LEFT" styleClass="search-container" HBox.hgrow="ALWAYS">
                    <FontAwesomeIconView glyphName="SEARCH" size="16" styleClass="search-icon" />
                    <TextField fx:id="searchField" promptText="Search locations..." styleClass="search-field" />
                </HBox>
                
                <!-- Action Buttons -->
                <HBox spacing="10" styleClass="nav-buttons-container">
                    <Button onAction="#handleAddLocation" styleClass="nav-button">
                        <graphic>
                            <FontAwesomeIconView glyphName="PLUS" styleClass="nav-icon" />
                        </graphic>
                    </Button>
                    <Button onAction="#handleRefresh" styleClass="nav-button">
                        <graphic>
                            <FontAwesomeIconView glyphName="REFRESH" styleClass="nav-icon" />
                        </graphic>
                    </Button>
                    <Button onAction="#handleBack" styleClass="nav-button">
                        <graphic>
                            <FontAwesomeIconView glyphName="ARROW_LEFT" styleClass="nav-icon" />
                        </graphic>
                    </Button>
                </HBox>
            </HBox>
        </VBox>
        
        <!-- Content Area -->
        <VBox spacing="20" styleClass="main-content" VBox.vgrow="ALWAYS">
            <padding>
                <Insets bottom="40" left="40" right="40" top="30" />
            </padding>
            
            <!-- Statistics Cards -->
            <HBox spacing="20">
                <VBox styleClass="dashboard-card, locations-card" HBox.hgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <StackPane styleClass="icon-container">
                            <FontAwesomeIconView glyphName="MAP_MARKER" size="20" />
                        </StackPane>
                        <VBox>
                            <Label styleClass="card-title" text="Total Locations" />
                            <Label fx:id="totalLocationsLabel" styleClass="card-value" text="0" />
                        </VBox>
                    </HBox>
                </VBox>
                
                <VBox styleClass="dashboard-card, active-card" HBox.hgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <StackPane styleClass="icon-container">
                            <FontAwesomeIconView glyphName="CHECK_CIRCLE" size="20" />
                        </StackPane>
                        <VBox>
                            <Label styleClass="card-title" text="Active Locations" />
                            <Label fx:id="activeLocationsLabel" styleClass="card-value" text="0" />
                        </VBox>
                    </HBox>
                </VBox>
            </HBox>

            <TableView fx:id="locationsTable" styleClass="data-table" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="nameColumn" text="Name" minWidth="150"/>
                    <TableColumn fx:id="addressColumn" text="Address" minWidth="200"/>
                    <TableColumn fx:id="cityColumn" text="City" minWidth="100"/>
                    <TableColumn fx:id="capacityColumn" text="Capacity" minWidth="80"/>
                    <TableColumn fx:id="dimensionColumn" text="Dimension" minWidth="100"/>
                    <TableColumn fx:id="priceColumn" text="Price" minWidth="80"/>
                    <TableColumn fx:id="statusColumn" text="Status" minWidth="80"/>
                    <TableColumn fx:id="actionsColumn" text="Actions" minWidth="100" style="-fx-alignment: CENTER;"/>
                </columns>
                <placeholder>
                    <Label text="No locations found" styleClass="placeholder-text">
                        <graphic>
                            <FontAwesomeIconView glyphName="MAP_MARKER" styleClass="placeholder-icon" size="24"/>
                        </graphic>
                    </Label>
                </placeholder>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>
    </VBox>
</HBox>
